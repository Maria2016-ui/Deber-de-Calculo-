<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Derivada por Límite</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
</head>
<body style="font-family: Arial; padding: 20px;">
  <h2>Calculadora de Derivada por Límite (Cociente Incremental)</h2>
  
  <label>Ingresa una función f(x):</label><br>
  <input id="funcion" type="text" value="x^2" style="width: 300px;">
  <br><br>

  <label>Valor de x:</label><br>
  <input id="xval" type="number" value="1" style="width: 100px;">
  <br><br>

  <button onclick="calcularDerivada()">Calcular derivada</button>

  <h3>Resultado:</h3>
  <div id="resultado" style="white-space: pre-wrap; background: #f0f0f0; padding: 10px; border-radius: 5px;"></div>

  <script>
    function calcularDerivada() {
      const expr = document.getElementById("funcion").value;
      const x0 = parseFloat(document.getElementById("xval").value);
      const h = 0.00001; // un h muy pequeño
      const resultadoDiv = document.getElementById("resultado");

      try {
        const f = math.parse(expr).compile();

        // f(x + h)
        const fxph = f.evaluate({x: x0 + h});
        // f(x)
        const fx = f.evaluate({x: x0});

        // Derivada como límite
        const derivada = (fxph - fx) / h;

        let texto = `f(x) = ${expr}\n`;
        texto += `Evaluamos en x = ${x0} usando h = ${h}\n`;
        texto += `f(x + h) = f(${x0} + ${h}) = ${fxph}\n`;
        texto += `f(x) = f(${x0}) = ${fx}\n`;
        texto += `Cociente incremental: (f(x + h) - f(x)) / h = (${fxph} - ${fx}) / ${h}\n`;
        texto += `Resultado aproximado de la derivada: ${derivada}`;

        resultadoDiv.textContent = texto;
      } catch (error) {
        resultadoDiv.textContent = "Error al procesar la función. Asegúrate de escribirla correctamente.\nEjemplo válido: x^2 + 3*x - 4";
      }
    }
  </script>
</body>
</html>


