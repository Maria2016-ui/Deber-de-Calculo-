<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Derivada por forma cuadrática</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f0f0f0;
    }
    input, button {
      font-size: 16px;
      padding: 5px;
      margin: 5px;
    }
    .resultado {
      margin-top: 20px;
      padding: 15px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

<h2>Derivada usando forma cuadrática:</h2>
<p><strong>f'(x) = lim(Δx → 0) [(f(x + Δx))² - (f(x))²] / Δx</strong></p>
<p>Ingresa <code>f(x)</code> como una función simple tipo <code>x</code>, <code>2x</code>, <code>x^2</code>, etc.</p>

<input id="fx" placeholder="Ejemplo: x^2">
<button onclick="derivar()">Derivar</button>

<div class="resultado" id="salida"></div>

<script>
  function derivar() {
    const entrada = document.getElementById("fx").value;
    const salida = document.getElementById("salida");
    salida.innerHTML = "";

    const h = "Δx";

    function evaluarFx(expr, sustituirPor) {
      let reemplazada = expr.replace(/x/g, "(" + sustituirPor + ")");
      return `(${reemplazada})`;
    }

    function expandirCuadrado(expr) {
      return `(${expr})² = (${expr})*(${expr})`;
    }

    let pasos = [];

    pasos.push(`<strong>f(x) =</strong> ${entrada}`);

    let fx = evaluarFx(entrada, "x");
    let fxh = evaluarFx(entrada, `x + ${h}`);

    pasos.push(`<strong>1)</strong> f(x) = ${fx}`);
    pasos.push(`<strong>2)</strong> f(x + Δx) = ${fxh}`);

    pasos.push(`<strong>3)</strong> Sustituimos en la fórmula:`);
    pasos.push(`[(f(x + Δx))² - (f(x))²] / Δx`);
    pasos.push(`=[(${fxh})² - (${fx})²] / Δx`);

    pasos.push(`<strong>4)</strong> Usamos identidad: (a² - b²) = (a - b)(a + b)`);
    pasos.push(`= [(${fxh}) - (${fx})] * [(${fxh}) + (${fx})] / Δx`);

    pasos.push(`<strong>5)</strong> Aplicamos límite Δx → 0`);
    pasos.push(`El término [(${fxh}) - (${fx})] / Δx → f'(x)`);
    pasos.push(`El término [(${fxh}) + (${fx})] → 2f(x)`);

    pasos.push(`<strong>Resultado:</strong> f'(x^2) = 2f(x) * f'(x)`);

    salida.innerHTML = pasos.map(p => "<p>" + p + "</p>").join("");
  }
</script>

</body>
</html>
