<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Derivadas Paso a Paso</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background-color: #f3f3f3;
    }
    h1 {
      color: #333;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      margin-top: 10px;
    }
    #result {
      margin-top: 20px;
      padding: 15px;
      background-color: white;
      border-left: 5px solid #4CAF50;
    }
    .paso {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

  <h1>Derivadas Paso a Paso (Versión Básica)</h1>

  <label for="funcion">Ingresa tu función (ejemplo: 3x^2 + 2x + 5):</label><br>
  <input type="text" id="funcion" placeholder="Ej: 5x^3 + 2x^2 - 3x + 7" size="40"><br>
  <button onclick="derivar()">Derivar paso a paso</button>

  <div id="result"></div>

  <script>
    function derivar() {
      const input = document.getElementById("funcion").value;
      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = "";

      const terminos = input.replace(/ /g, "").match(/[+-]?\d*x\^?\d*|[+-]?\d+/g);

      if (!terminos) {
        resultDiv.innerHTML = "<p>No se reconocieron términos válidos.</p>";
        return;
      }

      let pasos = [];
      let derivadaFinal = [];

      terminos.forEach((t, i) => {
        let paso = "";
        let coef = 1;
        let exp = 0;

        // Término constante
        if (!t.includes("x")) {
          paso = `El término <strong>${t}</strong> es constante. Su derivada es 0.`;
          derivadaFinal.push("0");
        }
        // Término como x o -x
        else if (t === "x" || t === "+x" || t === "-x") {
          coef = (t[0] === "-") ? -1 : 1;
          exp = 1;
          let nuevoCoef = coef * exp;
          paso = `Derivando <strong>${t}</strong>: coef = ${coef}, exp = ${exp}. Resultado: ${nuevoCoef}`;
          derivadaFinal.push(`${nuevoCoef}`);
        }
        // Término como ax^n
        else if (t.includes("^")) {
          let [parteCoef, parteExp] = t.split("x^");
          coef = (parteCoef === "" || parteCoef === "+") ? 1 : (parteCoef === "-" ? -1 : parseFloat(parteCoef));
          exp = parseFloat(parteExp);
          let nuevoCoef = coef * exp;
          let nuevoExp = exp - 1;
          paso = `Derivando <strong>${t}</strong>:  
                  coef = ${coef}, exp = ${exp}.  
                  Aplicamos regla de potencia:  
                  ${coef}×${exp} = ${nuevoCoef},  
                  nuevo exponente = ${nuevoExp}.  
                  Resultado: ${nuevoCoef}x^${nuevoExp}`;
          derivadaFinal.push(`${nuevoCoef}x^${nuevoExp}`);
        }
        // Término como ax
        else if (t.includes("x")) {
          coef = t.replace("x", "") || "1";
          coef = (coef === "+") ? 1 : (coef === "-") ? -1 : parseFloat(coef);
          exp = 1;
          let nuevoCoef = coef * exp;
          paso = `Derivando <strong>${t}</strong>: coef = ${coef}, exp = ${exp}. Resultado: ${nuevoCoef}`;
          derivadaFinal.push(`${nuevoCoef}`);
        }

        pasos.push(`<div class="paso">${paso}</div>`);
      });

      resultDiv.innerHTML = `
        <h3>Pasos:</h3>
        ${pasos.join("")}
        <hr>
        <h3>Derivada final:</h3>
        <p><strong>f'(x) = ${derivadaFinal.join(" + ").replace(/\+\s*-/g, "- ")}</strong></p>
      `;
    }
  </script>

</body>
</html>


